

## Fix Google Sign-In: Revert to Auto-Generated Configuration

### Root Cause

The error `"project_id is required"` occurs because we manually overrode the OAuth broker URL. The Lovable OAuth system needs to know which project is making the request, and when we use the absolute URL directly, this project context is lost.

The file `src/integrations/lovable/index.ts` is marked as **auto-generated** and should not be modified. The original configuration was correct.

### Solution

Revert the `src/integrations/lovable/index.ts` file to its original auto-generated state:

```typescript
// This file is auto-generated by Lovable. Do not modify it.

import { createLovableAuth } from "@lovable.dev/cloud-auth-js";
import { supabase } from "../supabase/client";

const lovableAuth = createLovableAuth({});  // Empty config - let library handle it

export const lovable = {
  auth: {
    signInWithOAuth: async (provider: "google" | "apple", opts?: { redirect_uri?: string }) => {
      // ... rest unchanged
    },
  },
};
```

### Why This Works

The `@lovable.dev/cloud-auth-js` library automatically:
1. Detects the project context from the Lovable hosting environment
2. Constructs the correct OAuth broker URL with project_id included
3. Handles both iframe and standalone environments

### Testing

After reverting, test on the **published production URL** (not preview):
- https://the-trading-diary.lovable.app/auth

The managed Google OAuth is configured and enabled in your backend, so it should work once the code is reverted.

### Files to Change

| File | Change |
|------|--------|
| `src/integrations/lovable/index.ts` | Revert `createLovableAuth({})` to empty config (remove `oauthBrokerUrl`) |

